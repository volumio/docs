<!DOCTYPE html>
<!--[if lt IE 7]>       <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>          <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>          <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <title>Making Measurment - Volumio Documentation</title>
    <meta name="description" content="The Audiophile Music Player" />
    <meta name="author" content="Michelangelo Guarise">
    <meta charset="UTF-8">
    <link rel="icon" href="../../themes/daux/img/favicon.png" type="image/x-icon">
    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font -->
    <link href='//fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700&subset=latin,cyrillic-ext,cyrillic' rel='stylesheet' type='text/css'>
    <!-- CSS -->
    <link href='../../themes/daux/css/theme.min.css' rel='stylesheet' type='text/css'><link href='../../themes/daux/css/volumiodocs.min.css' rel='stylesheet' type='text/css'>
            <!-- Tipue Search -->
        <link href="../../tipuesearch/tipuesearch.css" rel="stylesheet">
    
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body class="">
    
<div class="container-fluid fluid-height wrapper">
    <div class="navbar navbar-static-top hidden-print">
        <div class="container-fluid">
            <a class="brand navbar-brand pull-left" href="../../index.html">Volumio Documentation</a>

    <div class="navbar-right navbar-form search">
        <i class="glyphicon glyphicon-search search__icon">&nbsp;</i>
        <input type="search" id="tipue_search_input" class="form-control search__field" placeholder="Search..." autocomplete="on" results=25 autosave=text_search>
    </div>
        </div>
    </div>
    <div class="row columns content">
        <div class="left-column article-tree col-sm-3 hidden-print">
            <!-- For Mobile -->
            <div class="responsive-collapse">
                <button type="button" class="btn btn-sidebar" id="menu-spinner-button">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div id="sub-nav-collapse" class="sub-nav-collapse">
                <!-- Navigation -->
                <ul class='nav nav-list'><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>User Manual</a><ul class='nav nav-list'><li class=''><a href="../../User_Manual/Quick_Start_Guide.html">Quick Start Guide</a></li><li class=''><a href="../../User_Manual/First_steps_with_Volumio.html">First steps with Volumio</a></li><li class=''><a href="../../User_Manual/More_first_steps.html">More first steps</a></li><li class=''><a href="../../User_Manual/System_updates.html">System updates</a></li><li class=''><a href="../../User_Manual/Volume_Control_and_audio_quality.html">Volume Control and audio quality</a></li><li class=''><a href="../../User_Manual/Stream_audio_to_volumio.html">Stream audio to volumio</a></li><li class=''><a href="../../User_Manual/SSH.html">SSH</a></li><li class=''><a href="../../User_Manual/Configure_MPD_Clients_for_albumart.html">Configure MPD Clients for albumart</a></li><li class=''><a href="../../User_Manual/Sending_logs_for_troubleshooting.html">Sending logs for troubleshooting</a></li><li class=''><a href="../../User_Manual/Other_Customizations.html">Other Customizations</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Development How To</a><ul class='nav nav-list'><li class=''><a href="../../Development_How_To/Overview.html">Overview</a></li><li class=''><a href="../../Development_How_To/System_Architecture.html">System Architecture</a></li><li class=''><a href="../../Development_How_To/Set_up_development_environment_introduction.html">Set up development environment introduction</a></li><li class=''><a href="../../Development_How_To/Set_up_development_environment_for_backend.html">Set up development environment for backend</a></li><li class=''><a href="../../Development_How_To/Set_up_development_environment_for_UI.html">Set up development environment for UI</a></li><li class=''><a href="../../Development_How_To/Set_up_development_environment_for_Volumio_images.html">Set up development environment for Volumio images</a></li><li class=''><a href="../../Development_How_To/Updating_source_files.html">Updating source files</a></li><li class=''><a href="../../Development_How_To/Debugging.html">Debugging</a></li><li class=''><a href="../../Development_How_To/Helping_the_project.html">Helping the project</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>API</a><ul class='nav nav-list'><li class=''><a href="../../API/API_Overview.html">API Overview</a></li><li class=''><a href="../../API/WebSocket_APIs.html">WebSocket APIs</a></li><li class=''><a href="../../API/UI_Configuration_Pages.html">UI Configuration Pages</a></li><li class=''><a href="../../API/REST_API.html">REST API</a></li><li class=''><a href="../../API/Command_Line_Client.html">Command Line Client</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Plugin System</a><ul class='nav nav-list'><li class=''><a href="../../Plugin_System/Plugin_System_Overview.html">Plugin System Overview</a></li><li class=''><a href="../../Plugin_System/Writing_A_Plugin.html">Writing A Plugin</a></li><li class=''><a href="../../Plugin_System/Index.js.html">Index.js</a></li><li class=''><a href="../../Plugin_System/UI_Configuration_Pages.html">UI Configuration Pages</a></li><li class=''><a href="../../Plugin_System/Toast_Messages.html">Toast Messages</a></li><li class=''><a href="../../Plugin_System/Logging.html">Logging</a></li><li class=''><a href="../../Plugin_System/User_Modal.html">User Modal</a></li><li class=''><a href="../../Plugin_System/Music_Service_Plugin.html">Music Service Plugin</a></li><li class=''><a href="../../Plugin_System/Custom_ALSA_Contributions.html">Custom ALSA Contributions</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>I2S DACs</a><ul class='nav nav-list'><li class=''><a href="../../I2S_DACs/Adding_Compatibility_to_your_DAC.html">Adding Compatibility to your DAC</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Porting Guide</a><ul class='nav nav-list'><li class=''><a href="../../Porting_Guide/Introduction.html">Introduction</a></li><li class=''><a href="../../Porting_Guide/What_Is_Needed_To_Port_Successfully.html">What Is Needed To Port Successfully</a></li><li class=''><a href="../../Porting_Guide/Preparing_The_Build_Environment.html">Preparing The Build Environment</a></li><li class=''><a href="../../Porting_Guide/The_Process.html">The Process</a></li><li class=''><a href="../../Porting_Guide/The_Platform_Folder.html">The Platform Folder</a></li><li class=''><a href="../../Porting_Guide/Compiling_U-Boot.html">Compiling U-Boot</a></li><li class=''><a href="../../Porting_Guide/Get_The_Kernel_Source.html">Get The Kernel Source</a></li><li class=''><a href="../../Porting_Guide/Configure_Kernel_Options.html">Configure Kernel Options</a></li><li class=''><a href="../../Porting_Guide/Compiling_The_Kernel.html">Compiling The Kernel</a></li><li class=''><a href="../../Porting_Guide/Boot_Parameters.html">Boot Parameters</a></li><li class=''><a href="../../Porting_Guide/Saving_Files_To_The_Platform_Folder.html">Saving Files To The Platform Folder</a></li><li class=''><a href="../../Porting_Guide/A_Complete_Script.html">A Complete Script</a></li><li class=''><a href="../../Porting_Guide/1_How_To_Build_A_Sparky.html">1 How To Build A Sparky</a></li><li class=''><a href="../../Porting_Guide/Creating_the_image.html">Creating the image</a></li><li class=''><a href="../../Porting_Guide/Creating_the_image_build_scripts (Part 1).html">Creating the image build scripts (Part 1)</a></li><li class=''><a href="../../Porting_Guide/Creating_the_image_build_scripts (Part 2).html">Creating the image build scripts (Part 2)</a></li></ul></li><li class='open has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Plugins User Manuals</a><ul class='nav nav-list'><li class='open has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>brutefir</a><ul class='nav nav-list'><li class=''><a href="../../Plugins_User_Manuals/brutefir/Drc_with_Volumio.html">Drc with Volumio</a></li><li class=''><a href="../../Plugins_User_Manuals/brutefir/Preparing_your_system.html">Preparing your system</a></li><li class='active'><a href="../../Plugins_User_Manuals/brutefir/Making_Measurment.html">Making Measurment</a></li><li class=''><a href="../../Plugins_User_Manuals/brutefir/Making_filters.html">Making filters</a></li><li class=''><a href="../../Plugins_User_Manuals/brutefir/Using_filters_in_Volumio.html">Using filters in Volumio</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>rotaryencoder2</a><ul class='nav nav-list'><li class=''><a href="../../Plugins_User_Manuals/rotaryencoder2/Rotary_Encoder_II.html">Rotary Encoder II</a></li><li class=''><a href="../../Plugins_User_Manuals/rotaryencoder2/Debouncing.html">Debouncing</a></li><li class=''><a href="../../Plugins_User_Manuals/rotaryencoder2/Device_Tree_Overlays.html">Device Tree Overlays</a></li><li class=''><a href="../../Plugins_User_Manuals/rotaryencoder2/Compatible_Encoders.html">Compatible Encoders</a></li><li class=''><a href="../../Plugins_User_Manuals/rotaryencoder2/Appendix.html">Appendix</a></li></ul></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Good to Knows</a><ul class='nav nav-list'><li class=''><a href="../../Good_to_Knows/Markdown_Cheatsheet.html">Markdown Cheatsheet</a></li><li class=''><a href="../../Good_to_Knows/Mounting_an_NFS_Share.html">Mounting an NFS Share</a></li><li class=''><a href="../../Good_to_Knows/Contribute_to_this_Doc.html">Contribute to this Doc</a></li><li class=''><a href="../../Good_to_Knows/Connection_Outside_LAN.html">Connection Outside LAN</a></li><li class=''><a href="../../Good_to_Knows/Finding_Volumio.html">Finding Volumio</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>FAQs</a><ul class='nav nav-list'><li class=''><a href="../../FAQs/General.html">General</a></li><li class=''><a href="../../FAQs/Installation.html">Installation</a></li><li class=''><a href="../../FAQs/Updating_and_Maintenance.html">Updating and Maintenance</a></li><li class=''><a href="../../FAQs/Audio_Sources.html">Audio Sources</a></li><li class=''><a href="../../FAQs/Audio_Output.html">Audio Output</a></li></ul></li></ul>

                <div class="sidebar-links">
                    
                        <!-- Links -->
                        <a href="https://volumio.org" target="_blank">Home</a><br><a href="https://volumio.org/get-started" target="_blank">Download</a><br><a href="https://volumio.org/forum" target="_blank">Forum</a><br><a href="https://github.com/volumio" target="_blank">GitHub Repo</a><br><a href="https://volumio.github.io/docs/Good_to_Knows/Contribute_to_this_Doc.html" target="_blank">Improve this documentation</a><br>
                        <div id="toggleCodeBlock">
                                                    <a id="toggleCodeBlockBtn" href="#" onclick="toggleCodeBlocks();">Show Code Blocks Inline</a><br>
                                                </div>

                        <!-- Twitter -->
                                                    <div class="twitter">
                                <hr/>
                                <iframe allowtransparency="true" frameborder="0" scrolling="no" style="width:162px; height:20px;" src="https://platform.twitter.com/widgets/follow_button.html?screen_name=volumio&amp;show_count=false"></iframe>
                            </div>
                        
                        <hr/>
                    
                </div>
            </div>
        </div>
        <div class="right-column  content-area col-sm-9">

            <div class="content-page">
                                    <div id="tipue_search_content" style="display:none"></div>
                
                <div class="doc_content">
                    <article>
            <div class="page-header">
            <h1>Making Measurment</h1>
        </div>
    
    <h2 id="page_Making_measurements">Making measurements</h2>
<p>A good measurement of the system and room characteristics is essential to get a good result for DRC. This guide will describe multiple ways to measure the system and generate FIR filters.
One critical element of DRC is to understand how the room response changes depending on the positioning of the listener. It is possible to apply a very strong correction for a single listening position, but this will likely result in far worse accoustic properties in other listening positions. It is also possible to apply a more gentler correction based on measurements over an average of all listening positions.</p>
<h3 id="page_Overall_Process">Overall Process</h3>
<p>There are several steps required and described over the following pages:</p>
<ol>
<li>Recording
<ul>
<li>Playing a Sweep File in the listening position using the Tools in this plugin and record it with REW</li>
<li>
<strong>OR</strong> Playing a Sweep File multiple times in different positions using the Tools in this plugin and record it with REW, then averaging the result (see Note below)</li>
<li>
<strong>OR</strong> Playing Pink Noise using the Tools in this plugin while moving the microphone about the listening position (see Note below)</li>
</ul>
</li>
<li>Generating the filter
<ul>
<li>Using REW's EQ tools to generate a correction filter and finetuning the result (with Rephase)</li>
<li>
<strong>OR</strong> Use the DRC-FIR filter creation in the plugin. (see Note below)</li>
<li>
<strong>OR</strong> Manually make your own filter in rephase.</li>
</ul>
</li>
<li>Using the filter in Volumio with the Brutefir plugin.</li>
</ol>
<p><strong>Note:</strong> The DRC-FIR filter plugin requires an impulse as an input. REW only generates impulse data for single point sweep measurements, not for average results or for pink noise measurements described in the MMM method below.</p>
<h3 id="page_Tools_in_Volumio">Tools in Volumio</h3>
<p>To help to generate your filter, the plugin provides some tools for both single speaker measurement and stereo measurement.</p>
<ul>
<li>
<strong>Sweep files</strong> - These wav file contain a 20Hz to 20000kHz signal plus a time reference signal on the right channel.</li>
<li>
<strong>Pink Noise files</strong> - Provide pink noise files.</li>
</ul>
<p>Tools are not installed by default. If you need to install, press install tools in the plugin and wait the window to be refreshed. After the page is refreshed, you'll see new entries in the Tools section of the plugin.</p>
<img src="./img/install_tools.png">
<h3 id="page_Measurment">Measurment</h3>
<p>As said above the best results for a range of listening areas come from measuring in multiple places. We will describe a method called MMM - Moving Mic Measurment here. The idea is to make a multi point measurement and average them in real time. Read more about Moving Microphone Measurement method (implemented via RTA in REW) here <a href="http://www.ohl.to/audio/downloads/MMM-moving-mic-measurement.pdf"> : MMM</a>.</p>
<p><strong>MMM</strong> (or RTA as called in REW) is reliable up to approxiamtely <strong>600Hz</strong>, and that is the range where most of the room-mode related problems are.</p>
<p>For the frequencies above 600Hz you should use <strong>single point</strong> (at your listening position) time gated sweep measurements.</p>
<p>Measurment points are defined like in the pictures below. This avoids having a single optimized listening point:</p>
<img src="./img/sofa_top.png" width = 500 >
<img src="./img/sofa_front.png" width = 500 >
<img src="./img/sofa_iso.png" width = 500 >
<h3 id="page_Lets_go_Setup_REW">Let's go! - Setup REW:</h3>
<ol>
<li>
<p>Plug your Microphone on your computer, and place it in your listening position. The placement is important, and you're advised to read some online guides.</p>
</li>
<li>
<p>Launch REW (Roomeqwizard)</p>
</li>
<li>
<p>Before measuring can start, some options need to be configured as below:</p>
</li>
</ol>
<ul>
<li>Configure mic calibration as below (measurement microphones often come with calibration curves which can be obtained from the vendor):</li>
</ul>
<img src="./img/preferences_micmeter.jpg">
<ul>
<li>Then, adjust parameters for input and output. Ensure the sampling rate selected matches the sampling rate of the file you will play in Tools (BruteFIR ships with 44kHz files)</li>
</ul>
<img src="./img/rew_preferences.jpg">
<h3 id="page_MMM_measurement_using_Pink_Noise_files">MMM measurement using Pink Noise files:</h3>
<ol>
<li>In REW, click on RTA icon, it will open a new window. Then click on the gear (right top) and set the following parameters:</li>
</ol>
  <img src="./img/rew_rta_settings.png">
<ol start="2">
<li>When ready, in the plugin under Tools select <code>Pink_Noise_44k_##.WAV</code> (L, R, or LR depending on the measurement) and click on <code>Play selected file</code>. Pink noise should start to play.</li>
<li>In REW, press the red record button (top right)</li>
<li>Move your microphone following the MMM scheme described above.
<ul>
<li>Tip: Try to move your microphone between points at a consistent speed. REW is preforming the averageing of measurements in realtime and leaving the microphone in any single position for a different length of time will result in an under/over correction in that position. Also do not stand between the microphone and the speaker while making measurements as your body will affect the accoustics.</li>
<li>These are measurement points as suggested by DiracLive. You can use them as your MMM points - start from central position, move slowly with constant speed (app 20cm/sec) toward next positions as if you were to draw a line between them. Finish back at the central position.</li>
</ul>
</li>
<li>Click the save icon to Save the current data as new measurement.</li>
<li>If you are doing separate L and R measurements repeate the previous 5 steps for the other channel.</li>
<li>For all your measurements click <code>Graph</code> and set smoothing to <code>1/12 Smoothing</code>
</li>
</ol>
<h3 id="page_Single_point_measurement_using_Sweep_files">Single point measurement using Sweep files:</h3>
<ol>
<li>In REW click on Measure and set the following parameters :
<ul>
<li>It is important to ensure the paramters match those of the sweep file, especially length, and sample rate.</li>
<li>Check that <code>Use Accoustic Timing Refernce</code> is selected as otherwise REW will not know when we start the sweep.</li>
</ul>
</li>
</ol>
<img src="./img/make_a_measurment.jpg">
<ol start="2">
<li>Since we are using the accoustic timing reference from Volumio we need to <strong>Mute</strong> the PC sound. Otherwise when the measurements are started the PC will play its own accoustic timing reference.</li>
<li>Click <code>Start</code>. Wait for the status message <code>Waiting for time reference</code>
</li>
<li>When ready, in the plugin under Tools select <code>512kMeasSweep_30_to_20000_44k_PCM16_R_ref##.WAV</code> (L, R, or LR depending on the measurement) and click on <code>Play selected file</code>. The accoustic timing reference should play followed by a frequency sweep.</li>
<li>If you are doing separate L and R measurements repeat the previous 4 steps for the other channel.</li>
<li>For all your measurements click <code>Graph</code> and set the smoothing to <code>1/48 Smoothing</code>
</li>
</ol>
<h3 id="page_Multi_point_average_measurement_using_Sweep_files">Multi-point average measurement using Sweep files:</h3>
<ol>
<li>Repeat the instructions above for <code>Single point measurement using Swwp files</code> for each of your listening positions, or for all of the points in described in the MMM graphics above.
<ul>
<li>Note: If you are doing separate L and R measurements ensure you do L and R before moving the microphone to the next position. It is a good idea to name all the Sweeps you are making.</li>
</ul>
</li>
<li>After you have completed all measurements select <code>All SPL</code> above the graph.</li>
<li>Tick all the measurements you want to average on the bottom of the screen (select L and R measurements separately if making separate filters)</li>
<li>Click <code>Average the Responses</code>.</li>
</ol>
<h3 id="page_Exporting_data_for_next_step">Exporting data for next step.</h3>
<p>How to export will depend on how measurements were made and how the FIR filter will be created. Repeat the following steps for Left and Right channels, or just once for Stereo measurements.</p>
<h4 id="page_Automatic_filter_creation_using_DRC_FIR_and_Single_Point_Sweep_measurements">Automatic filter creation using DRC-FIR - and Single Point Sweep measurements</h4>
<p>If you are working with single point measurements using sweeps it is possible to export an Impulse response of the sweep. This impulse response can be used in DRC-FIR in the plugin to automatically generate a DRC filter and is described on the next page.</p>
<ul>
<li>Choose <code>File &gt; Export &gt; Export impulse response as wav</code> - this option will be greyed out for Averages and RTA Measurements.</li>
<li>Ensure the output format is 32bit, mono, and Normalised.</li>
</ul>
<img src="./img/export_impulse.jpg">
<h4 id="page_Filter_creation_using_REWRephase">Filter creation using REW/Rephase</h4>
<p>When using Rephase either manually or to tweak REW's output to see the change in your response you need to export this measurement:</p>
<ul>
<li>Choose <code>File &gt; Export &gt; Export measurement as text</code>
</li>
</ul>
<h3 id="page_Now_you_are_ready_for_the_next_step_Create_your_filters">Now you are ready for the next step : Create your filters !</h3>

        <nav>
        <ul class="pager">
            <li><a href="../../Plugins_User_Manuals/brutefir/Preparing_your_system.html">Previous</a></li>            <li><a href="../../Plugins_User_Manuals/brutefir/Making_filters.html">Next</a></li>        </ul>
    </nav>
    </article>

                </div>
            </div>
        </div>
    </div>
</div>

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-46374275-1', '');
    ga('send', 'pageview');
</script>

    <!-- jQuery -->
    <script src="../../themes/daux/js/jquery-1.11.3.min.js"></script>

    <!-- hightlight.js -->
    <script src="../../themes/daux/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- JS -->
    
    <script src="../../themes/daux/js/daux.js"></script>

            <!-- Tipue Search -->
        <script type="text/javascript" src="../../tipuesearch/tipuesearch_set.js"></script>
        <script type="text/javascript" src="../../tipuesearch/tipuesearch.min.js"></script>

        <script>
            window.onunload = function(){}; // force $(document).ready to be called on back/forward navigation in firefox
            $(document).ready(function() {
                $('#tipue_search_input').tipuesearch({
                    'show': 10,
                    'mode': 'json',
                    'base_url': '../../'
                });
            });
        </script>
    
</body>
</html>
