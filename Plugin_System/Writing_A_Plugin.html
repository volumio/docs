<!DOCTYPE html>
<!--[if lt IE 7]>       <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>          <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>          <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <title>Writing A Plugin - Volumio Documentation</title>
    <meta name="description" content="The Audiophile Music Player" />
    <meta name="author" content="Michelangelo Guarise">
    <meta charset="UTF-8">
    <link rel="icon" href="../themes/daux/img/favicon.png" type="image/x-icon">
    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font -->
    <link href='//fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700&subset=latin,cyrillic-ext,cyrillic' rel='stylesheet' type='text/css'>
    <!-- CSS -->
    <link href='../themes/daux/css/theme.min.css' rel='stylesheet' type='text/css'><link href='../themes/daux/css/volumiodocs.min.css' rel='stylesheet' type='text/css'>
            <!-- Tipue Search -->
        <link href="../tipuesearch/tipuesearch.css" rel="stylesheet">
    
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body class="">
    
<div class="container-fluid fluid-height wrapper">
    <div class="navbar navbar-static-top hidden-print">
        <div class="container-fluid">
            <a class="brand navbar-brand pull-left" href="../index.html">Volumio Documentation</a>

    <div class="navbar-right navbar-form search">
        <i class="glyphicon glyphicon-search search__icon">&nbsp;</i>
        <input type="search" id="tipue_search_input" class="form-control search__field" placeholder="Search..." autocomplete="on" results=25 autosave=text_search>
    </div>
        </div>
    </div>
    <div class="row columns content">
        <div class="left-column article-tree col-sm-3 hidden-print">
            <!-- For Mobile -->
            <div class="responsive-collapse">
                <button type="button" class="btn btn-sidebar" id="menu-spinner-button">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div id="sub-nav-collapse" class="sub-nav-collapse">
                <!-- Navigation -->
                <ul class='nav nav-list'><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>User Manual</a><ul class='nav nav-list'><li class=''><a href="../User_Manual/Quick_Start_Guide.html">Quick Start Guide</a></li><li class=''><a href="../User_Manual/First_steps_with_Volumio.html">First steps with Volumio</a></li><li class=''><a href="../User_Manual/More_first_steps.html">More first steps</a></li><li class=''><a href="../User_Manual/System_updates.html">System updates</a></li><li class=''><a href="../User_Manual/Volume_Control_and_audio_quality.html">Volume Control and audio quality</a></li><li class=''><a href="../User_Manual/Stream_audio_to_volumio.html">Stream audio to volumio</a></li><li class=''><a href="../User_Manual/SSH.html">SSH</a></li><li class=''><a href="../User_Manual/Configure_MPD_Clients_for_albumart.html">Configure MPD Clients for albumart</a></li><li class=''><a href="../User_Manual/Sending_logs_for_troubleshooting.html">Sending logs for troubleshooting</a></li><li class=''><a href="../User_Manual/Other_Customizations.html">Other Customizations</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Development How To</a><ul class='nav nav-list'><li class=''><a href="../Development_How_To/Overview.html">Overview</a></li><li class=''><a href="../Development_How_To/System_Architecture.html">System Architecture</a></li><li class=''><a href="../Development_How_To/Set_up_development_environment_introduction.html">Set up development environment introduction</a></li><li class=''><a href="../Development_How_To/Set_up_development_environment_for_backend.html">Set up development environment for backend</a></li><li class=''><a href="../Development_How_To/Set_up_development_environment_for_UI.html">Set up development environment for UI</a></li><li class=''><a href="../Development_How_To/Set_up_development_environment_for_Volumio_images.html">Set up development environment for Volumio images</a></li><li class=''><a href="../Development_How_To/Updating_source_files.html">Updating source files</a></li><li class=''><a href="../Development_How_To/Debugging.html">Debugging</a></li><li class=''><a href="../Development_How_To/Helping_the_project.html">Helping the project</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>API</a><ul class='nav nav-list'><li class=''><a href="../API/API_Overview.html">API Overview</a></li><li class=''><a href="../API/WebSocket_APIs.html">WebSocket APIs</a></li><li class=''><a href="../API/UI_Configuration_Pages.html">UI Configuration Pages</a></li><li class=''><a href="../API/REST_API.html">REST API</a></li><li class=''><a href="../API/Command_Line_Client.html">Command Line Client</a></li></ul></li><li class='open has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Plugin System</a><ul class='nav nav-list'><li class=''><a href="../Plugin_System/Plugin_System_Overview.html">Plugin System Overview</a></li><li class='active'><a href="../Plugin_System/Writing_A_Plugin.html">Writing A Plugin</a></li><li class=''><a href="../Plugin_System/Index.js.html">Index.js</a></li><li class=''><a href="../Plugin_System/UI_Configuration_Pages.html">UI Configuration Pages</a></li><li class=''><a href="../Plugin_System/Toast_Messages.html">Toast Messages</a></li><li class=''><a href="../Plugin_System/Logging.html">Logging</a></li><li class=''><a href="../Plugin_System/User_Modal.html">User Modal</a></li><li class=''><a href="../Plugin_System/Music_Service_Plugin.html">Music Service Plugin</a></li><li class=''><a href="../Plugin_System/Custom_ALSA_Contributions.html">Custom ALSA Contributions</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>I2S DACs</a><ul class='nav nav-list'><li class=''><a href="../I2S_DACs/Adding_Compatibility_to_your_DAC.html">Adding Compatibility to your DAC</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Porting Guide</a><ul class='nav nav-list'><li class=''><a href="../Porting_Guide/Introduction.html">Introduction</a></li><li class=''><a href="../Porting_Guide/What_Is_Needed_To_Port_Successfully.html">What Is Needed To Port Successfully</a></li><li class=''><a href="../Porting_Guide/Preparing_The_Build_Environment.html">Preparing The Build Environment</a></li><li class=''><a href="../Porting_Guide/The_Process.html">The Process</a></li><li class=''><a href="../Porting_Guide/The_Platform_Folder.html">The Platform Folder</a></li><li class=''><a href="../Porting_Guide/Compiling_U-Boot.html">Compiling U-Boot</a></li><li class=''><a href="../Porting_Guide/Get_The_Kernel_Source.html">Get The Kernel Source</a></li><li class=''><a href="../Porting_Guide/Configure_Kernel_Options.html">Configure Kernel Options</a></li><li class=''><a href="../Porting_Guide/Compiling_The_Kernel.html">Compiling The Kernel</a></li><li class=''><a href="../Porting_Guide/Boot_Parameters.html">Boot Parameters</a></li><li class=''><a href="../Porting_Guide/Saving_Files_To_The_Platform_Folder.html">Saving Files To The Platform Folder</a></li><li class=''><a href="../Porting_Guide/A_Complete_Script.html">A Complete Script</a></li><li class=''><a href="../Porting_Guide/1_How_To_Build_A_Sparky.html">1 How To Build A Sparky</a></li><li class=''><a href="../Porting_Guide/Creating_the_image.html">Creating the image</a></li><li class=''><a href="../Porting_Guide/Creating_the_image_build_scripts (Part 1).html">Creating the image build scripts (Part 1)</a></li><li class=''><a href="../Porting_Guide/Creating_the_image_build_scripts (Part 2).html">Creating the image build scripts (Part 2)</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Plugins User Manuals</a><ul class='nav nav-list'><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>brutefir</a><ul class='nav nav-list'><li class=''><a href="../Plugins_User_Manuals/brutefir/Drc_with_Volumio.html">Drc with Volumio</a></li><li class=''><a href="../Plugins_User_Manuals/brutefir/Preparing_your_system.html">Preparing your system</a></li><li class=''><a href="../Plugins_User_Manuals/brutefir/Making_Measurment.html">Making Measurment</a></li><li class=''><a href="../Plugins_User_Manuals/brutefir/Making_filters.html">Making filters</a></li><li class=''><a href="../Plugins_User_Manuals/brutefir/Using_filters_in_Volumio.html">Using filters in Volumio</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>rotaryencoder2</a><ul class='nav nav-list'><li class=''><a href="../Plugins_User_Manuals/rotaryencoder2/Rotary_Encoder_II.html">Rotary Encoder II</a></li><li class=''><a href="../Plugins_User_Manuals/rotaryencoder2/Debouncing.html">Debouncing</a></li><li class=''><a href="../Plugins_User_Manuals/rotaryencoder2/Device_Tree_Overlays.html">Device Tree Overlays</a></li><li class=''><a href="../Plugins_User_Manuals/rotaryencoder2/Compatible_Encoders.html">Compatible Encoders</a></li><li class=''><a href="../Plugins_User_Manuals/rotaryencoder2/Appendix.html">Appendix</a></li></ul></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Good to Knows</a><ul class='nav nav-list'><li class=''><a href="../Good_to_Knows/Markdown_Cheatsheet.html">Markdown Cheatsheet</a></li><li class=''><a href="../Good_to_Knows/Mounting_an_NFS_Share.html">Mounting an NFS Share</a></li><li class=''><a href="../Good_to_Knows/Contribute_to_this_Doc.html">Contribute to this Doc</a></li><li class=''><a href="../Good_to_Knows/Connection_Outside_LAN.html">Connection Outside LAN</a></li><li class=''><a href="../Good_to_Knows/Finding_Volumio.html">Finding Volumio</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>FAQs</a><ul class='nav nav-list'><li class=''><a href="../FAQs/General.html">General</a></li><li class=''><a href="../FAQs/Installation.html">Installation</a></li><li class=''><a href="../FAQs/Updating_and_Maintenance.html">Updating and Maintenance</a></li><li class=''><a href="../FAQs/Audio_Sources.html">Audio Sources</a></li><li class=''><a href="../FAQs/Audio_Output.html">Audio Output</a></li></ul></li></ul>

                <div class="sidebar-links">
                    
                        <!-- Links -->
                        <a href="https://volumio.org" target="_blank">Home</a><br><a href="https://volumio.org/get-started" target="_blank">Download</a><br><a href="https://volumio.org/forum" target="_blank">Forum</a><br><a href="https://github.com/volumio" target="_blank">GitHub Repo</a><br><a href="https://volumio.github.io/docs/Good_to_Knows/Contribute_to_this_Doc.html" target="_blank">Improve this documentation</a><br>
                        <div id="toggleCodeBlock">
                                                    <a id="toggleCodeBlockBtn" href="#" onclick="toggleCodeBlocks();">Show Code Blocks Inline</a><br>
                                                </div>

                        <!-- Twitter -->
                                                    <div class="twitter">
                                <hr/>
                                <iframe allowtransparency="true" frameborder="0" scrolling="no" style="width:162px; height:20px;" src="https://platform.twitter.com/widgets/follow_button.html?screen_name=volumio&amp;show_count=false"></iframe>
                            </div>
                        
                        <hr/>
                    
                </div>
            </div>
        </div>
        <div class="right-column  content-area col-sm-9">

            <div class="content-page">
                                    <div id="tipue_search_content" style="display:none"></div>
                
                <div class="doc_content">
                    <article>
            <div class="page-header">
            <h1>Writing A Plugin</h1>
        </div>
    
    <h2 id="page_Writing_a_Plugin">Writing a Plugin</h2>
<h3 id="page_Create_your_plugin">Create your plugin</h3>
<p>The plugin helper utility allows you to easily create your own plugin, by providing tools for the main steps.
Its functions are:</p>
<pre><code class="language-bash">
volumio plugin

volumio plugin init

volumio plugin refresh

volumio plugin package

volumio plugin publish

volumio plugin install

volumio plugin update

</code></pre>
<h3 id="page_volumio_plugin">volumio plugin</h3>
<p>This command will simply show you a review of the usage of the utility, as follows:</p>
<pre><code class="language-bash">
---- VOLUMIO PLUGIN HELPER ----

This utility helps you creating new plugins for Volumio.
Options:
init      creates a new plugin
refresh   copies the plugin in the system
package   compresses the plugin
publish   publishes the plugin on git

</code></pre>
<h3 id="page_volumio_plugin_init">volumio plugin init</h3>
<p>Call the utility with this command to create a new plugin from scratch. First
of all it will copy the repository, then create the appropriate folder as
specified by the user and prepare all the basic files, finally it will install
your plugin locally. Here a step by step example:</p>
<p style="background-color: rgba(255, 170, 50, 0.3);padding: 20px;border-left: 5px solid orange; border-radius: 4px;color:rgb(255, 170, 50);">
  ATTENTION: The first step is cloning the <a href="https://github.com/volumio/volumio-plugins">volumio-plugins repository</a>, just head there and click "fork" on top right corner
</p>
<pre><code class="language-bash">
volumio@volumio:~$ volumio plugin init

Welcome to the Volumio Plugin Creator!
You have to decide which category your plugin belongs to, then you have to select
a name for it, leave us the rest
Warning: make meaningful choices, you cannot change them later!

Creating a new plugin
? volumio plugins folder non existent, please type your github username Ghembs
cloning repo:
git clone https://github.com/Ghembs/volumio-plugins.git
Cloning into '/home/volumio/volumio-plugins'...
Done, please run command again

volumio@volumio:~$ volumio plugin init

Welcome to the Volumio Plugin Creator!
You have to decide which category your plugin belongs to, then you have to select
a name for it, leave us the rest ;)
Warning: make meaningful choices, you cannot change them later!

Creating a new plugin
? Please select
the Plugin Category
  1) audio_interface
  2) miscellanea
  3) music_service
  4) system_controller
  5) user_interface
  Answer: 1

</code></pre>
<pre><code class="language-bash">Creating a new plugin
? Please select
the Plugin Category audio_interface
? Please insert a name for your plugin test
NAME: test CATEGORY: audio_interface
Copying sample files
? Please insert your name (Volumio Team)
? Insert a brief description of your plugin (100 chars) test plugin
Installing dependencies locally
npm WARN test@1.0.0 No repository field.

Congratulation, your plugin has been succesfully created!
You can find it in: /home/volumio/volumio-plugins/plugins/audio_interface/test

</code></pre>
<p>After you selected a category and a name for the plugin, it will ask for yours,
(Volumio team is the default name), then for a description and finally it will
create it and install it locally (/data/plugins/...).</p>
<h4 id="page_downloadinginstalling_dependencies">downloading/installing dependencies</h4>
<p>If you need npm packages for your plugin you might want to install the build-essential package to be able to download and compile packages using the node package manager (npm).</p>
<pre><code class="language-bash">
volumio@volumio:~$ sudo apt-get install build-essential

</code></pre>
<p>You can now install package from npm by using the simple command npm install {package name}, e.g. npm install epoll</p>
<h3 id="page_volumio_plugin_refresh">volumio plugin refresh</h3>
<p>Call the utility with this command if you worked on the source and you want a
plugin to be updated locally (/data/plugins/...). You have to call it from an
appropriate plugin folder, in the path of <code>volumio-plugins</code>.</p>
<pre><code class="language-bash">volumio@volumio:~/volumio-plugins/plugins/audio_interface/test$ volumio plugin refresh

This command will copy all your plugin\'s file in the correspondent folder in data

Updating the plugin in Data
Plugin succesfully refreshed

</code></pre>
<p>In order to have the refreshed files take effect restart the Volumio service.</p>
<pre><code>volumio vrestart
</code></pre>
<h3 id="page_volumio_plugin_package">volumio plugin package</h3>
<p>Call the utility with this command if you want to create a package with the
content of a plugin's folder. It will take care of npm dependencies and put the
zip in the same folder.</p>
<pre><code class="language-bash">volumio@volumio:~/volumio-plugins/plugins/audio_interface/test$ volumio plugin package

This command will create a package with your plugin

Compressing the plugin
No modules found, running &quot;npm install&quot;
npm WARN test@1.0.0 No repository field.
Plugin succesfully compressed

</code></pre>
<p>You can find more details below about the zip file and the contents you must
have in your plugin's folder</p>
<h3 id="page_volumio_plugin_publish">volumio plugin publish</h3>
<p>Call the utility with this command if you want to upload your plugin on github.
It will automatically call the package function if no <code>.zip</code> has been found,
after asking for a last change in versioning, then it will change branch and,
depending on if the plugin and/or category has been found on the <code>plugins.json</code>
file, it will ask for additional details or both details and description.
Finally it will commit them and push them on your repo.</p>
<pre><code class="language-bash">volumio@volumio:~/volumio-plugins/plugins/audio_interface/test$ volumio plugin publish

This command will publish the plugin on volumio plugins store

Publishing the plugin
? do you want to change your version? (leave blank for default) 1.0.0
Switched to branch 'gh-pages'
? Insert some details about your plugin (e.g. features, requirements, notes, etc
... max 1000 chars) plugin for documentation purposes
updating plugin sources:

/usr/bin/git push origin master
updating plugin packages:

/usr/bin/git push origin gh-pages
Congratulations, your package has been correctly uploaded and is ready for merging!
</code></pre>
<p>The <code>plugins.json</code> file should now contain all the informations about your
plugin, as follow:</p>
<pre><code class="language-json">{
    &quot;prettyName&quot;:&quot;audiointerface&quot;,
    &quot;name&quot;:&quot;audio_interface&quot;,
    &quot;id&quot;:&quot;cat5&quot;,
    &quot;description&quot;:&quot;&quot;,
    &quot;plugins&quot;:
    [
        {
            &quot;prettyName&quot;:&quot;test&quot;,
            &quot;icon&quot;:&quot;fa-lightbulb-o&quot;,
            &quot;name&quot;:&quot;test&quot;,
            &quot;version&quot;:&quot;1.0.0&quot;,
            &quot;url&quot;:&quot;http://volumio.github.io/volumio-plugins/plugins/volumio/armhf/audio_interface/test/test.zip&quot;,
            &quot;license&quot;:&quot;ISC&quot;,
            &quot;description&quot;:&quot;test plugin&quot;,
            &quot;details&quot;:&quot;plugin for documentation purposes&quot;,
            &quot;author&quot;:&quot;Volumio Team&quot;,
            &quot;screenshots&quot;:[{&quot;image&quot;:&quot;&quot;,&quot;thumb&quot;:&quot;&quot;}],
            &quot;updated&quot;:&quot;2-6-2017&quot;
        }
    ]
}

</code></pre>
<p style="background-color: rgba(255, 170, 50, 0.3);padding: 20px;border-left: 5px solid orange; border-radius: 4px;color:rgb(255, 170, 50);">
  ATTENTION: Your plugin is not published yet. All you need to do is <a href="https://help.github.com/articles/creating-a-pull-request/">create a pull request</a>, this will initiate the review process by Volumio Team. If everything looks good, your plugin will be published in the Volumio plugins store.
</p>
<h3 id="page_volumio_plugin_install">volumio plugin install</h3>
<p>Call the utility with this command if you just downloaded a plugin and wish to install
it. You should be in the plugin folder, containing a proper <code>package.json</code> file.</p>
<pre><code class="language-bash">volumio@volumio:~/volumio-plugins/plugins/accessory/ir_controller$ volumio plugin install

This command will install the plugin on your device

Compressing the plugin
Plugin succesfully compressed
Progress: 10
Status :Downloading plugin
Progress: 30
Status :Creating folder on disk
Progress: 40
Status :Unpacking plugin
Progress: 50
Status :Checking for duplicate plugin
Progress: 60
Status :Copying Plugin into location
Progress: 70
Status :Installing dependencies
Progress: 70
Status :Installing dependencies
Progress: 70
Status :Installing dependencies
Progress: 90
Status :Adding plugin to registry
Progress: 100
Status :Plugin Successfully Installed
Done!
</code></pre>
<h3 id="page_volumio_plugin_update">volumio plugin update</h3>
<p>Call the utility with this command if you just downloaded a more recent version of a plugin
you've already installed and activated, to update it. You should be in the plugin folder, containing a proper <code>package.json</code> file.</p>
<pre><code class="language-bash">volumio@volumio:~/volumio-plugins/plugins/accessory/ir_controller$ volumio plugin update

This command will update the plugin on your device

Compressing the plugin
Plugin succesfully compressed
Progress: 10
Status :Downloading plugin
Progress: 20
Status :Plugin stopped
Progress: 30
Status :Creating folder on disk
Progress: 40
Status :Unpacking plugin
Progress: 60
Status :Updating Plugin Files
Progress: 70
Status :Installing dependencies
Progress: 70
Status :Installing dependencies
Progress: 70
Status :Installing dependencies
Progress: 90
Status :Adding plugin to registry
Progress: 100
Status :Plugin Successfully Installed
Done!
</code></pre>
<h1 id="page_Volumio_plugin_files_description">Volumio plugin files description</h1>
<h2 id="page_The_Plugin_Zip_File">The Plugin Zip File</h2>
<p>The  plugin zip file will be created as the last step of the plugin creation and it must contains :</p>
<h3 id="page_Mandatory_Files">Mandatory Files</h3>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Format</th>
<th align="left">Content</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">install.sh</td>
<td align="left">Bash script</td>
<td align="left">this file contains a script of action and dependencies installation needed for the plugin. It’s a BASH script. It MUST be executable.</td>
</tr>
<tr>
<td align="left">index.js</td>
<td align="left">javascript</td>
<td align="left">this is main file, written in node.js</td>
</tr>
<tr>
<td align="left">node_modules</td>
<td align="left">folder</td>
<td align="left">folder that contains all node modules needed</td>
</tr>
<tr>
<td align="left">config.json</td>
<td align="left">json</td>
<td align="left">this file contains all the parameters to be save for the plugin.</td>
</tr>
<tr>
<td align="left">Package.json</td>
<td align="left">json</td>
<td align="left">this file contains description of the plugin and the list of required node dependencies</td>
</tr>
<tr>
<td align="left">Uninstall.sh</td>
<td align="left">Bash script</td>
<td align="left">this file contains the script to remove the plugin.</td>
</tr>
</tbody>
</table>
<br>
<p style="background-color: rgba(255, 170, 50, 0.3);padding: 20px;border-left: 5px solid orange; border-radius: 4px;color:rgb(255, 170, 50);">
  CAREFUL: The zip must contain the files in the plugins root folder, NOT the root folder itself!
</p>
<p>Details and examples of mandatories files.
Here you will find more details for each files listed above, what they contain, how to write a working plugin. Examples based on Spop plugin.</p>
<h4 id="page_Installsh">Install.sh</h4>
<p>This file allows download and installation of dependencies for the plugin. It’s a executable file written in BASH.</p>
<pre><code class="language-bash">#!/bin/bash

echo &quot;Installing Spop Dependencies&quot;
sudo apt-get update
sudo apt-get -y install libasound2-dev libreadline-dev libsox-dev libsoup2.4-dev libsoup2.4-1 libdbus-glib-1-dev libnotify-dev --no-install-recommends



echo &quot;Installing Spop and libspotify&quot;

DPKG_ARCH=`dpkg --print-architecture`

echo $DPKG_ARCH
cd /tmp
wget http://repo.volumio.org/Packages/Spop/spop-${DPKG_ARCH}.tar.gz
sudo tar xvf /tmp/spop-${DPKG_ARCH}.tar.gz -C /
rm /tmp/spop-${DPKG_ARCH}.tar.gz


sudo chmod 777 /etc/spopd.conf

#required to end the plugin install
echo &quot;plugininstallend&quot;

</code></pre>
<p>IMPORTANT THINGS  TO NOTICE</p>
<ul>
<li>Use &quot;echo&quot; to detail what's going during the install, this will help you debugging, and notify the user what goes on during install</li>
<li>Since we are installing compiled binaries (that need to be compiled for both x86 and armhf, using <code>dpkg --print-architecture</code> as part of the file name will ensure an architecture-agnostic script)</li>
<li>For security reasons dpkg is not allowed, so if you need to install binaries, tar them and download the tar accordingly</li>
<li>We have no environment variable set, so make sure you cd in the desired folder</li>
<li>Ensure to give proper permissions to file you'll need to edit later on (node runs with user volumio)</li>
<li>To avoid installing unwanted stuff, make sure to place <code>--no-install-recommends</code> after your to-install list</li>
<li>
<code>echo &quot;plugininstallend&quot;</code> must be placed at the end of the install script to signal that installation has ended.</li>
</ul>
<h4 id="page_Indexjs">Index.js</h4>
<p>Index.js
This file is the main file of the plugin. It is written in javascript. Please refer to <a href="../Plugin_System/Index.js">index.js section</a>  for a detailed explanation.</p>
<h5 id="page_configjson">config.json</h5>
<p>File in which is saved default parameters, and the way saved parameters will be saved.</p>
<pre><code class="language-json">{
  &quot;enabled&quot;: {
    &quot;type&quot;: &quot;boolean&quot;,
    &quot;value&quot;: false
  },
  &quot;username&quot;: {
      &quot;type&quot;: &quot;string&quot;,
      &quot;value&quot;: &quot;&quot;
  },
  &quot;password&quot;: {
    &quot;type&quot;: &quot;string&quot;,
    &quot;value&quot;: &quot;&quot;
  },
  &quot;bitrate&quot;: {
    &quot;type&quot;: &quot;boolean&quot;,
    &quot;value&quot;: true
  }
}
</code></pre>
<h4 id="page_packagejson">package.json</h4>
<p>This file contains package description and dependencies</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;spop&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;Spotify plugin for Volumio2&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
  },
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;volumio_info&quot;: {
    &quot;prettyName&quot;: &quot;Spotify&quot;,
    &quot;icon&quot;: &quot;fa-spotify&quot;,
    &quot;plugin_type&quot;: &quot;music_service&quot;,
    &quot;boot_priority&quot;:1
  },
  &quot;dependencies&quot;: {
    &quot;fast.js&quot;: &quot;^0.1.1&quot;,
    &quot;fs-extra&quot;: &quot;^0.28.0&quot;,
    &quot;kew&quot;: &quot;^0.7.0&quot;,
    &quot;net&quot;: &quot;^1.0.2&quot;,
    &quot;nodetools&quot;: &quot;^1.0.0&quot;,
    &quot;spotify-web-api-node&quot;: &quot;^2.3.0&quot;,
    &quot;v-conf&quot;: &quot;^0.10.0&quot;
  }
}
</code></pre>
<p>IMPORTANT THINGS  TO NOTICE</p>
<p>The relevant parts are:</p>
<ul>
<li>name: this will be the plugin's name folder</li>
<li>licence: use any licence, you're not bound to GPL here</li>
<li>dependencies: indicate the node modules this plugin requres, to avoid yourself the extra hassle of 2 different zip files for x86 and ARM, try to choose node modules that don't need to be compiled or rely on external dependencies</li>
<li>make sure to indicate propery the pretty name, icon and plugin type. The more straightforward, the better</li>
<li>version, this is used to keep track of version and request for updates if new versions are found</li>
<li>boot priority, accepts a numerical value from 1 to 10. Useful if you need to start your plugin after one another. 1 means it is started first, 10 means it will be started at last.</li>
</ul>
<h4 id="page_Uninstallsh">Uninstall.sh</h4>
<p>Bash file. As install file MUST be executable. Here you will basically revert what you did in the install.sh file .</p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Format</th>
<th align="left">Content</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">i18n</td>
<td align="left">folder</td>
<td align="left">contains string_en.json and other strings to translate the plugin</td>
</tr>
<tr>
<td align="left">Uiconfig.json</td>
<td align="left">json</td>
<td align="left">this file describe the UI of the plugin.</td>
</tr>
<tr>
<td align="left">Other</td>
<td align="left">Text, image, sound, script, executable...</td>
<td align="left">required file / script to use in the plugin such as executable or service,image, sound,  application key...</td>
</tr>
<tr>
<td align="left">RequiredConf.json</td>
<td align="left">json</td>
<td align="left">Configuration key or variables mandatory for the plugin to work. Useful to add a new parameter with an update</td>
</tr>
</tbody>
</table>
<p>Details and examples of optional files
Depending on the plugin, other file may be nedeed.</p>
<h4 id="page_UIConfigjson">UIConfig.json</h4>
<p>This file describes the user interface for the plugin configuration, that will appear while clicking on the cog. Please note that the filename is case sensitive.</p>
<p>Please refer to UI Configuration Pages for reference.</p>
<h4 id="page_I18n">I18n</h4>
<p>This folder contains languages strings if you want to translate your plugin</p>
<p>You have to have one file per language.</p>
<p>The file naming is “strings_en.json” for english.</p>
<p>Of course replace “en” by the language to be translated “it”, “fr”, “es”.</p>
<p>This is a json file.</p>
<pre><code class="language-json">{
  &quot;spotify_username&quot;:&quot;Spotify username&quot;,
  &quot;spotify_password&quot;:&quot;Spotify password&quot;,
  &quot;high_bitrate&quot;:&quot;High quality&quot;,
  &quot;search_results&quot;:&quot;Number of results&quot;,
  &quot;plugins&quot;:&quot;Last.fm&quot;,
  &quot;last_fm_username&quot;:&quot;Last.fm username&quot;,
  &quot;last_fm_password&quot;:&quot;Last.fm password&quot;,
  &quot;SEARCH_SONGS_SECTION&quot;:&quot;Spotify songs&quot;,
  &quot;SEARCH_ALBUMS_SECTION&quot;:&quot;Spotity albums&quot;,
  &quot;SEARCH_ARTISTS_SECTION&quot;:&quot;Spotify artists&quot;

}
</code></pre>
<h4 id="page_Other">Other</h4>
<p>Your plugin may require other files such as image, sound, executable, configuration files etc… You have to include these files in the ZIP file and ensure proper permissions if they'll need to be edited.</p>
<h2 id="page_Publish_your_plugin">Publish your plugin</h2>
<p>When you want to provide your plugin to other people it is best practice to start development by forking the <a href="https://github.com/volumio/volumio-plugins">volumio-plugins repository</a>. Start developing directly in the master branch and create a pull request when you are done.</p>

        <nav>
        <ul class="pager">
            <li><a href="../Plugin_System/Plugin_System_Overview.html">Previous</a></li>            <li><a href="../Plugin_System/Index.js.html">Next</a></li>        </ul>
    </nav>
    </article>

                </div>
            </div>
        </div>
    </div>
</div>

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-46374275-1', '');
    ga('send', 'pageview');
</script>

    <!-- jQuery -->
    <script src="../themes/daux/js/jquery-1.11.3.min.js"></script>

    <!-- hightlight.js -->
    <script src="../themes/daux/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- JS -->
    
    <script src="../themes/daux/js/daux.js"></script>

            <!-- Tipue Search -->
        <script type="text/javascript" src="../tipuesearch/tipuesearch_set.js"></script>
        <script type="text/javascript" src="../tipuesearch/tipuesearch.min.js"></script>

        <script>
            window.onunload = function(){}; // force $(document).ready to be called on back/forward navigation in firefox
            $(document).ready(function() {
                $('#tipue_search_input').tipuesearch({
                    'show': 10,
                    'mode': 'json',
                    'base_url': '../'
                });
            });
        </script>
    
</body>
</html>
